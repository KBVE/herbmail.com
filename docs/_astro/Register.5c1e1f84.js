import{S as Te,i as ze,s as Ue,e as Ee,a as T,b as m,t as Ne,h as Pe,d as k,c as z,f as v,g as I,j as X,k as Oe,l as i,m as c,n as he,o as J,p as te,q as Ae,r as me,u as Ie,v as De,w as Me,x as Re,y as qe,z as Be}from"./index.3130c7e9.js";const Fe="5ba581fa-b6fc-4bb0-8222-02fcd6a59e35",He="https://js.hcaptcha.com/1/api.js";class U{status;error;message;data;constructor(t,r,a){this.status=t,this.error=t<200||t>=300,this.message=r,this.data=a}display(){console.log(`Status: ${this.status}, Message: ${this.message}, Error: ${this.error}, Data: ${JSON.stringify(this.data)}`)}async serialize(){try{return JSON.stringify({status:this.status,error:this.error,message:this.message,data:this.data})}catch(t){return console.error("Serialization error:",t),JSON.stringify({status:500,error:!0,message:"Internal Server Error: Unable to serialize response",data:{}})}}static async deserialize(t){try{const r=JSON.parse(t);return new U(r.status,r.message,r.data)}catch(r){return console.error("Deserialization error:",r),new U(500,"Internal Server Error: Unable to deserialize response",{})}}}const Je=new RegExp(/^[a-z0-9]+$/i),_e=8,We=async e=>e.length<_e?new U(400,"Validation Error",{error:"Username is too short. Minimum length is "+_e}):Je.test(e)?new U(200,"Validation Successful",{message:"Username is valid."}):new U(400,"Validation Error",{error:"Username contains invalid characters."});async function Ye(e){try{const t=await We(e);return t.status===200?{isValid:!0,error:null}:{isValid:!1,error:t.data.error}}catch{return{isValid:!1,error:"An unexpected error occurred"}}}const Qe=new RegExp(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/),Ze=async e=>Qe.test(e)?new U(200,"Validation Successful",{message:"Email is valid."}):new U(400,"Validation Error",{error:"Email is invalid."});async function Ge(e){try{const t=await Ze(e);return t.status===200?{isValid:!0,error:null}:{isValid:!1,error:t.data.error}}catch{return{isValid:!1,error:"An unexpected error occurred"}}}const Ke=async e=>{if(e.length<8)return new U(400,"Validation Error",{error:"Password is too short"});if(e.length>255)return new U(400,"Validation Error",{error:"Password is too long"});const t=/[A-Z]/.test(e),r=/[a-z]/.test(e),a=/\d/.test(e),s=/[^A-Za-z0-9]/.test(e);return!t||!r||!a||!s?new U(400,"Validation Error",{error:"Password must include uppercase, lowercase, digits, and special characters"}):new U(200,"Validation Successful",{message:"Password is valid"})};async function Xe(e){try{const t=await Ke(e);return t.status===200?{isValid:!0,error:null}:{isValid:!1,error:t.data.error}}catch{return{isValid:!1,error:"An unexpected error occurred"}}}let fe=0,ke=[];function je(){return fe+=1,()=>{if(fe-=1,fe===0){let e=ke;ke=[];for(let t of e)t()}}}function $e(e){let t=je();return e().finally(t)}let _=[],ve=(e,t)=>{let r=[],a={get(){return a.lc||a.listen(()=>{})(),a.value},l:t||0,lc:0,listen(s,l){return a.lc=r.push(s,l||a.l)/2,()=>{let n=r.indexOf(s);~n&&(r.splice(n,2),a.lc--,a.lc||a.off())}},notify(s){let l=!_.length;for(let n=0;n<r.length;n+=2)_.push(r[n],a.value,s,r[n+1]);if(l){for(let n=0;n<_.length;n+=4){let N=!1;for(let p=n+7;p<_.length;p+=4)if(_[p]<_[n+3]){N=!0;break}N?_.push(_[n],_[n+1],_[n+2],_[n+3]):_[n](_[n+1],_[n+2])}_.length=0}},off(){},set(s){a.value!==s&&(a.value=s,a.notify())},subscribe(s,l){let n=a.listen(s,l);return s(a.value),n},value:e};return a};const et=5,ce=6,ue=10;let tt=(e,t,r,a)=>(e.events=e.events||{},e.events[r+ue]||(e.events[r+ue]=a(s=>{e.events[r].reduceRight((l,n)=>(n(l),l),{shared:{},...s})})),e.events[r]=e.events[r]||[],e.events[r].push(t),()=>{let s=e.events[r],l=s.indexOf(t);s.splice(l,1),s.length||(delete e.events[r],e.events[r+ue](),delete e.events[r+ue])}),rt=1e3,st=(e,t)=>tt(e,a=>{let s=t(a);s&&e.events[ce].push(s)},et,a=>{let s=e.listen;e.listen=(...n)=>(!e.lc&&!e.active&&(e.active=!0,a()),s(...n));let l=e.off;return e.events[ce]=[],e.off=()=>{l(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let n of e.events[ce])n();e.events[ce]=[]}},rt)},()=>{e.listen=s,e.off=l}}),at=(e={})=>{let t=ve(e);return t.setKey=function(r,a){typeof a>"u"?r in t.value&&(t.value={...t.value},delete t.value[r],t.notify(r)):t.value[r]!==a&&(t.value={...t.value,[r]:a},t.notify(r))},t},Le=e=>e,re={},W={addEventListener(){},removeEventListener(){}};function nt(){try{return typeof localStorage<"u"}catch{return!1}}nt()&&(re=localStorage);let it={addEventListener(e,t,r){window.addEventListener("storage",t),window.addEventListener("pageshow",r)},removeEventListener(e,t,r){window.removeEventListener("storage",t),window.removeEventListener("pageshow",r)}};typeof window<"u"&&(W=it);function lt(e,t={},r={}){let a=r.encode||Le,s=r.decode||Le,l=at(),n=l.setKey;l.setKey=(u,d)=>{typeof d>"u"?(r.listen!==!1&&W.perKey&&W.removeEventListener(e+u,p,f),delete re[e+u]):(r.listen!==!1&&W.perKey&&!(u in l.value)&&W.addEventListener(e+u,p,f),re[e+u]=a(d)),n(u,d)};let N=l.set;l.set=function(u){for(let d in u)l.setKey(d,u[d]);for(let d in l.value)d in u||l.setKey(d)};function p(u){u.key?u.key.startsWith(e)&&(u.newValue===null?n(u.key.slice(e.length),void 0):n(u.key.slice(e.length),s(u.newValue))):N({})}function f(){let u={...t};for(let d in re)d.startsWith(e)&&(u[d.slice(e.length)]=s(re[d]));l.set(u)}return st(l,()=>{if(f(),r.listen!==!1)return W.addEventListener(e,p,f),()=>{W.removeEventListener(e,p,f);for(let u in l.value)W.removeEventListener(e+u,p,f)}}),l}const ot=ve(""),pe=ve("");lt("kbve:");pe.subscribe(e=>{console.log(`[TOAST] -> ${e}`)});const Ve=async e=>{$e(async()=>{ot.set(e),pe.set(e)})};function Ce(e){let t,r;return{c(){t=m("script"),this.h()},l(a){t=v(a,"SCRIPT",{src:!0});var s=I(t);s.forEach(k),this.h()},h(){Be(t.src,r=e[7])||i(t,"src",r),t.async=!0,t.defer=!0},m(a,s){he(a,t,s)},p:me,d(a){a&&k(t)}}}function ct(e){let t,r,a,s,l,n,N="Your email",p,f,u,d,L,Z="Your Username",D,b,Y,P,E,O="Password",M,g,j,R,V,se="Confirm Password",B,y,F,C,G,q,ae='<div class="flex items-start"></div> <a href="/account/recovery" class="text-sm font-medium text-kbve-primary-light hover:underline">Forgot password?</a>',$,A,o,ee="Register",H,K,Q,ge='Have an account yet? <a href="/account/login" class="font-medium hover:underline">Login!</a>',de,ye,w=e[1]&&!window?.hcaptcha&&Ce(e);return{c(){w&&w.c(),t=Ee(),r=T(),a=m("section"),s=m("form"),l=m("div"),n=m("label"),n.textContent=N,p=T(),f=m("input"),u=T(),d=m("div"),L=m("label"),L.textContent=Z,D=T(),b=m("input"),Y=T(),P=m("div"),E=m("label"),E.textContent=O,M=T(),g=m("input"),j=T(),R=m("div"),V=m("label"),V.textContent=se,B=T(),y=m("input"),F=T(),C=m("div"),G=T(),q=m("div"),q.innerHTML=ae,$=T(),A=m("button"),o=m("span"),H=Ne(ee),K=T(),Q=m("p"),Q.innerHTML=ge,this.h()},l(h){const S=Pe("svelte-1t641fu",document.head);w&&w.l(S),t=Ee(),S.forEach(k),r=z(h),a=v(h,"SECTION",{class:!0});var we=I(a);s=v(we,"FORM",{class:!0,action:!0});var x=I(s);l=v(x,"DIV",{});var ne=I(l);n=v(ne,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),X(n)!=="svelte-1bx9lff"&&(n.textContent=N),p=z(ne),f=v(ne,"INPUT",{type:!0,name:!0,id:!0,class:!0,placeholder:!0}),ne.forEach(k),u=z(x),d=v(x,"DIV",{});var ie=I(d);L=v(ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),X(L)!=="svelte-mwdljj"&&(L.textContent=Z),D=z(ie),b=v(ie,"INPUT",{type:!0,name:!0,id:!0,class:!0,placeholder:!0}),ie.forEach(k),Y=z(x),P=v(x,"DIV",{});var le=I(P);E=v(le,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),X(E)!=="svelte-48z9qy"&&(E.textContent=O),M=z(le),g=v(le,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),le.forEach(k),j=z(x),R=v(x,"DIV",{});var oe=I(R);V=v(oe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),X(V)!=="svelte-oro9gy"&&(V.textContent=se),B=z(oe),y=v(oe,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0,class:!0}),oe.forEach(k),F=z(x),C=v(x,"DIV",{id:!0,class:!0}),I(C).forEach(k),G=z(x),q=v(x,"DIV",{class:!0,"data-svelte-h":!0}),X(q)!=="svelte-irgx61"&&(q.innerHTML=ae),$=z(x),A=v(x,"BUTTON",{type:!0,class:!0});var xe=I(A);o=v(xe,"SPAN",{});var be=I(o);H=Oe(be,ee),be.forEach(k),xe.forEach(k),K=z(x),Q=v(x,"P",{class:!0,"data-svelte-h":!0}),X(Q)!=="svelte-1h8r17p"&&(Q.innerHTML=ge),x.forEach(k),we.forEach(k),this.h()},h(){i(n,"for","email"),i(n,"class","block mb-2 text-sm font-medium"),i(f,"type","email"),i(f,"name","email"),i(f,"id","email"),i(f,"class","bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5"),i(f,"placeholder","name@company.com"),f.required=!0,i(L,"for","username"),i(L,"class","block mb-2 text-sm font-medium"),i(b,"type","text"),i(b,"name","username"),i(b,"id","username"),i(b,"class","bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5"),i(b,"placeholder","Username-chan"),b.required=!0,i(E,"for","password"),i(E,"class","block mb-2 text-sm font-medium"),i(g,"type","password"),i(g,"name","password"),i(g,"id","password"),i(g,"placeholder","••••••••"),i(g,"class","bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5"),g.required=!0,i(V,"for","password"),i(V,"class","block mb-2 text-sm font-medium"),i(y,"type","password"),i(y,"name","confirm"),i(y,"id","confirm"),i(y,"placeholder","••••••••"),i(y,"class","bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5"),y.required=!0,i(C,"id","h-captcha-"+e[6]),i(C,"class","flex justify-center"),i(q,"class","flex items-center justify-between"),i(A,"type","submit"),i(A,"class","w-full bg-offset/[.75] hover:bg-offset focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"),A.disabled=ut,i(Q,"class","text-sm font-light"),i(s,"class","space-y-4 md:space-y-6"),i(s,"action","#"),i(a,"class",e[0])},m(h,S){w&&w.m(document.head,null),c(document.head,t),he(h,r,S),he(h,a,S),c(a,s),c(s,l),c(l,n),c(l,p),c(l,f),J(f,e[3]),c(s,u),c(s,d),c(d,L),c(d,D),c(d,b),J(b,e[2]),c(s,Y),c(s,P),c(P,E),c(P,M),c(P,g),J(g,e[5]),c(s,j),c(s,R),c(R,V),c(R,B),c(R,y),J(y,e[4]),c(s,F),c(s,C),c(s,G),c(s,q),c(s,$),c(s,A),c(A,o),c(o,H),c(s,K),c(s,Q),de||(ye=[te(f,"input",e[22]),te(b,"input",e[23]),te(g,"input",e[24]),te(y,"input",e[25]),te(s,"submit",Ae(e[8]))],de=!0)},p(h,S){h[1]&&!window?.hcaptcha?w?w.p(h,S):(w=Ce(h),w.c(),w.m(t.parentNode,t)):w&&(w.d(1),w=null),S[0]&8&&f.value!==h[3]&&J(f,h[3]),S[0]&4&&b.value!==h[2]&&J(b,h[2]),S[0]&32&&g.value!==h[5]&&J(g,h[5]),S[0]&16&&y.value!==h[4]&&J(y,h[4]),S[0]&1&&i(a,"class",h[0])},i:me,o:me,d(h){h&&(k(r),k(a)),w&&w.d(h),k(t),de=!1,Ie(ye)}}}var Se=(e=>(e.DARK="dark",e.LIGHT="light",e))(Se||{});let ut=!1;function dt(e,t,r){let a;De(e,pe,o=>r(28,a=o));const s=Me();let{domain:l=""}=t,{className:n=""}=t,{redirect:N=!1}=t,{sitekey:p=Fe}=t,{apihost:f=He}=t,{hl:u=""}=t,{reCaptchaCompat:d=!1}=t,{theme:L=Se.DARK}=t,{size:Z="compact"}=t;const D=()=>{E&&O&&M&&hcaptcha.reset(M)},b=o=>{if(E&&O&&M)return hcaptcha.execute(M,o)},Y=()=>{E&&O&&new Toastify({text:a,duration:3e3,destination:"#",newWindow:!1,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #FF8A4C, #8DA2FB)"}}).showToast()},P=Math.floor(Math.random()*100);let E=!1,O=!1,M,g;const j=new URLSearchParams({recaptchacompat:d?"on":"off",onload:"hcaptchaOnLoad",render:"explicit"}),R=`${f}?${j.toString()}`;Re(()=>{p||r(9,p=window.sitekey),window.hcaptchaOnLoad=()=>{s("load"),r(20,O=!0)},window.onSuccess=o=>{s("success",{token:o}),G=o},window.onError=()=>{s("error")},window.onClose=()=>{s("close")},window.onExpired=()=>{s("expired"),D()},s("mount"),r(1,E=!0)}),qe(()=>{window.hcaptchaOnLoad=null,window.onSuccess=null,O&&(hcaptcha=null)});async function V(o,ee){try{const{isValid:H,error:K}=await o(ee);return H?!0:(D(),K&&(Ve(K),Y()),!1)}catch(H){return D(),console.error(H),!1}}const se=async()=>{if(!(!await V(Ye,B)||!await V(Ge,y)||!await V(Xe,C))){if(C!==F){D(),Ve("Passwords do not match!"),Y();return}console.log(G)}};let B="",y="",F="",C="",G="";function q(){y=this.value,r(3,y)}function ae(){B=this.value,r(2,B)}function $(){C=this.value,r(5,C)}function A(){F=this.value,r(4,F)}return e.$$set=o=>{"domain"in o&&r(10,l=o.domain),"className"in o&&r(0,n=o.className),"redirect"in o&&r(11,N=o.redirect),"sitekey"in o&&r(9,p=o.sitekey),"apihost"in o&&r(12,f=o.apihost),"hl"in o&&r(13,u=o.hl),"reCaptchaCompat"in o&&r(14,d=o.reCaptchaCompat),"theme"in o&&r(15,L=o.theme),"size"in o&&r(16,Z=o.size)},e.$$.update=()=>{e.$$.dirty[0]&3252738&&E&&O&&(M=hcaptcha.render(`h-captcha-${P}`,{sitekey:p,hl:u,theme:L,callback:"onSuccess","error-callback":"onError","close-callback":"onClose","expired-callback":"onExpired",size:Z}),r(21,g=window.document.getElementById("skeleton")),g&&g.remove())},[n,E,B,y,F,C,P,R,se,p,l,N,f,u,d,L,Z,D,b,Y,O,g,q,ae,$,A]}class ht extends Te{constructor(t){super(),ze(this,t,dt,ct,Ue,{domain:10,className:0,redirect:11,sitekey:9,apihost:12,hl:13,reCaptchaCompat:14,theme:15,size:16,reset:17,execute:18,toast:19},null,[-1,-1])}get reset(){return this.$$.ctx[17]}get execute(){return this.$$.ctx[18]}get toast(){return this.$$.ctx[19]}}export{ht as default};
